I"C<p>Sauda√ß√µes m√©ros mortais, primeiro, pe√ßo desculpas pelo per√≠odo sem trazer novidades para voc√™s (estive em uma excurs√£o pela gal√°xia), em breve escreverei um artigo sobre essa viagem. Neste artigo mostrarei sobre <strong>annotations</strong> (√© claro, est√° no t√≠tulo).</p>

<p>Como disse meu amigo <a href="https://medium.com/@guidiego" target="_blank">Guilherme Diego</a> no artigo <a href="https://medium.com/@guidiego/c%C3%B3digo-limpo-%C3%A9-uma-responsabilidade-blocos-5be1fdd8d341#.gbx5keq0s" target="_blank">C√≥digo Limpo √© uma Responsabilidade‚Ää‚Äî‚ÄäBlocos</a>:</p>

<div style="text-align:center">
	<img class="image" src="/img/posts/2016-01-custom-annotations/ler-curtir-compartilhar.png" />
</div>

<p>Enquanto escrevo, vou ouvindo o √°lbum <a href="https://open.spotify.com/album/6iJEtgHTEbVlSS5isIS71z" target="_blank">As Daylight Dies</a> da banda Killswitch Engage, √© um banda muito bacana.</p>

<p>Enfim, vamos ao que interessa, vem comigo.</p>

<h2 id="introdu√ß√£o">Introdu√ß√£o</h2>

<p>Em um projeto recente do qual participei do processo de <strong>refactoring</strong>, o que me auxiliou bastante, foi a implementa√ß√£o de <strong>annotations</strong>, onde foi poss√≠vel segregar informa√ß√µes est√°ticas e at√© atingir algumas pr√°ticas de <strong>clean code</strong>, salientando que isso foi uma solu√ß√£o que funcionou bem no respectivo projeto.</p>

<p>Neste artigo eu n√£o discutirei se √© o correto, ou n√£o, apenas demonstrarei como implementar <strong>custom annotations</strong> com o <strong>doctrine reader</strong>. Fica sobre teu crit√©rio meu chapa!</p>

<h2 id="escopo">Escopo</h2>

<p>No exemplo que mostrarei, utilizaremos os seguintes arquivos:</p>

<ol>
  <li><strong>compose.json</strong>: Depend√™ncia e informa√ß√µes do projeto;</li>
  <li><strong>PeopleAnnotation.php</strong>: Ser√° a nossa annotation, utilizaremos os atributos para receber valores de quem ir√° consumir a <strong>annotation</strong>;</li>
  <li><strong>People.php</strong>: Iremos consumir nossa annotation e informar os respectivos valores para segregarmos informa√ß√µes;</li>
  <li><strong>ReaderAnnotation.php</strong>: Neste arquivo iremos juntar tudo e fazer uma sopa de letrinhas.</li>
</ol>

<p>Irei demonstrar os c√≥digos no artigo, caso necess√°rio, voc√™ poder√° verificar no <a href="https://gist.github.com/leonardorifeli/9c12f94b109cb7859ca9" target="_blank">Gist</a>.</p>

<h2 id="depend√™ncia-sim-voc√™-precisar√°-dela">Depend√™ncia, sim voc√™ precisar√° dela.</h2>

<p>Para trabalhar com o <strong>Doctrine Annotation Reader</strong>, ser√° necess√°rio possuir a depend√™ncia <strong>‚Äúdoctrine/common‚Äù</strong>, conforme o arquivo <strong>composer.json</strong> abaixo:</p>

<script src="https://gist.github.com/leonardorifeli/9c12f94b109cb7859ca9.js?file=composer.json"></script>

<p><span class="space">¬†</span></p>

<h2 id="desenvolvendo-a-classe-da-annotation">Desenvolvendo a classe da annotation.</h2>

<p>Resumindo, esta classe ser√° respons√°vel pela <strong>annotation</strong>, ou seja, os atributos <strong>p√∫blicos</strong> da classe armazenar√£o informa√ß√µes que poder√£o ser informadas por quem ir√° consumir a <strong>annotation</strong> em quest√£o. Segue abaixo o arquivo <strong>PeopleAnnotation.php</strong>, √© a nossa annotation:</p>

<script src="https://gist.github.com/leonardorifeli/9c12f94b109cb7859ca9.js?file=PeopleAnnotation.php"></script>

<p><span class="space">¬†</span></p>

<p>Repare que, a classe em quest√£o possui uma <strong>annotation</strong>, sendo ela <strong>@Annotation</strong>, isto √© necess√°rio para informar ao <strong>Doctrine Annotation Reader</strong> que a classe em quest√£o, realmente √© uma <strong>annotation</strong>.</p>

<h2 id="consumindo-a-annotation">Consumindo a annotation</h2>

<div style="text-align:center">
	<img class="image" src="/img/posts/2016-01-custom-annotations/consumindo.gif" />
</div>

<p>Nesta etapa, iremos consumir a annotation <strong>PeopleAnnotation</strong> e informaremos os valores que a annotation disponibiliza.</p>

<p>Salientando, √© poss√≠vel consumir a annotation em:</p>

<ul>
  <li>classes;</li>
  <li>atributos;</li>
  <li>m√©todos.</li>
</ul>

<p>No exemplo abaixo, temos a classe <strong>People</strong>, que comsumir√° a <strong>PeopleAnnotation</strong>:</p>

<script src="https://gist.github.com/leonardorifeli/9c12f94b109cb7859ca9.js?file=People.php"></script>

<p><span class="space">¬†</span></p>

<p>Repare que, a classe <strong>People</strong> est√° consumindo a <strong>annotation</strong> tanto na respectiva classe, quanto nos atributos e m√©todos.</p>

<h2 id="vamos-verificar-a-people-finalizando-a-sopa-de-letrinhas">Vamos verificar a <strong>People</strong>. Finalizando a sopa de letrinhas</h2>

<p>Nesta etapa final, iremos instanciar a classe <strong>AnnotationReader</strong> para lermos as <strong>annotations</strong> extra√≠das da classe <strong>People</strong> (que est√° consumindo a <strong>PeopleAnnotation</strong>).</p>

<p>Classes nativas utilizadas no exemplo:</p>

<ul>
  <li><strong><a href="http://php.net/manual/pt_BR/class.reflectionclass.php" target="_blank">ReflectionClass()</a></strong>;</li>
  <li><strong><a href="http://php.net/manual/pt_BR/class.reflectionobject.php" target="_blank">ReflectionObject()</a></strong>;</li>
  <li><strong><a href="http://php.net/manual/pt_BR/class.reflectionproperty.php" target="_blank">ReflectionProperty()</a></strong>;</li>
  <li><strong><a href="http://php.net/manual/pt_BR/class.reflectionmethod.php" target="_blank">ReflectionMethod()</a></strong>.</li>
</ul>

<p>Abaixo o exemplo:</p>

<script src="https://gist.github.com/leonardorifeli/9c12f94b109cb7859ca9.js?file=ReaderAnnotation.php"></script>

<p><span class="space">¬†</span></p>

<h2 id="resultados">Resultados</h2>

<div style="text-align:center">
	<img class="image" src="/img/posts/2016-01-custom-annotations/happy.gif" />
</div>

<script src="https://gist.github.com/leonardorifeli/9c12f94b109cb7859ca9.js?file=result.txt"></script>

<p><span class="space">¬†</span></p>

<h2 id="refer√™ncias">Refer√™ncias</h2>

<ol>
  <li><a href="http://masnun.com/2012/08/12/using-annotations-in-php-with-doctrine-annotation-reader.html" target="_blank">Artigo sobre o assunto em ingl√™s</a></li>
  <li><a href="http://doctrine-common.readthedocs.org/en/latest/reference/annotations.html" target="_blank">Doctrine - Documenta√ß√£o oficial</a></li>
  <li><a href="http://php.net/" target="_blank">Documenta√ß√£o oficial PHP.net</a></li>
</ol>

<h2 id="conclus√£o">Conclus√£o</h2>

<p>A utiliza√ß√£o de <strong>annotation</strong> pode facilitar diversas condi√ß√µes, salientando que, a necessidade de implementar <strong>custom annotation</strong> varia de situa√ß√£o. Use o bom senso de programador.</p>

<p>Quaisquer feedbacks ser√£o bem-vindos, fique √† vontade para comentar e/ou implementar alguma informa√ß√£o.</p>

<p>At√© breve m√©ros mortais e eternos aprendizes (todos somos).</p>
:ET